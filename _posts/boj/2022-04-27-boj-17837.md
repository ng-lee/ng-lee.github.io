---
title: '[ë°±ì¤€/Gold2] 17837 ìƒˆë¡œìš´ ê²Œì„ 2 - íŒŒì´ì¬'
date: 2022-04-27 23:04:00 +0900
categories: [Baekjoon]
tags: [baekjoon, gold2, êµ¬í˜„, ì‹œë®¬ë ˆì´ì…˜]
math: true
mermaid: true
---

![](/assets/images/banners/baekjoon_banner.png){: style="max-width: 100%"}

## [ë¬¸ì œ í™•ì¸í•˜ê¸° â”](https://www.acmicpc.net/problem/17837){:target="_blank"}

## â­ï¸ ë‚˜ì˜ í’€ì´

`matrix`ì—ëŠ” ì²´ìŠ¤íŒì˜ ìƒíƒœë¥¼, `horses`ì—ëŠ” ë§ë“¤ì˜ ì •ë³´ë¥¼, `maps`ì—ëŠ” ì²´ìŠ¤íŒì— ë†“ì—¬ì§„ ë§ë“¤ì˜ ì¸ë±ìŠ¤ ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ì˜€ë‹¤.

`maps`ì—ì„œ ì•ì— ìˆì„ìˆ˜ë¡, ê°€ì¥ ì•„ë˜ì— ìˆëŠ” ë§ì´ë‹¤.

ì´ ë¬¸ì œì—ì„œì˜ í¬ì¸íŠ¸ëŠ” ì²´ìŠ¤íŒì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ê±°ë‚˜ íŒŒë€ìƒ‰ ì¹¸ì„ ê°€ëŠ” ê²½ìš°ì´ë‹¤. ì¼ë‹¨, ë²”ìœ„ë‚˜ ë‹¤ìŒì— ê°€ëŠ” ì¹¸ì˜ ìƒ‰ì„ ê²€ì‚¬í•´ë´¤ëŠ”ë°, ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ê±°ë‚˜ íŒŒë€ìƒ‰ ì¹¸ìœ¼ë¡œ ê°€ê²Œ ë˜ë©´ ë°©í–¥ì´ ë°”ë€Œê²Œ ë˜ê³  ì´ê²ƒì„ ê°±ì‹ í•´ì¤˜ì•¼ í•œë‹¤. ë°©í–¥ì„ ë°”ê¿¨ëŠ”ë°ë„ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ê±°ë‚˜ íŒŒë€ìƒ‰ ì¹¸ìœ¼ë¡œ ê°€ê²Œ ë˜ëŠ” ê²½ìš°ì—ëŠ” ë°©í–¥ì„ ë°”ê¾¸ì§€ ì•Šì•„ë„ ë˜ê³  ê°±ì‹ ì„ ë˜ë‹¤ì‹œ í•˜ì§€ ì•ŠëŠ”ë‹¤. 

## ì½”ë“œ

```python
import sys

input = sys.stdin.readline

dx = (1, -1, 0, 0)
dy = (0, 0, -1, 1)


def main():
    n, k = map(int, input().split())
    matrix = [list(map(int, input().split())) for _ in range(n)]
    horses = [list(map(lambda x: int(x) - 1, input().split())) for _ in range(k)]
    maps = [[[] for _ in range(n)] for _ in range(n)]

    # mapsì— ë§ë“¤ì˜ ì¸ë±ìŠ¤ ì €ì¥
    for idx in range(k):
        y, x, d = horses[idx]
        maps[y][x].append(idx)

    # ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ”ì§€, íŒŒë€ìƒ‰ ì¹¸ì¸ì§€ í™•ì¸
    def check(point):
        y, x = point
        if 0 <= y < n and 0 <= x < n and matrix[y][x] != 2:
            return True
        else:
            return False

    def go(matrix, horses, maps):
        cnt = 0
        while cnt < 1000:
            cnt += 1
            for i in range(k):
                y, x, d = horses[i]
                ny = y + dy[d]
                nx = x + dx[d]
                # ë‹¤ìŒ ì¹¸ì´ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ê±°ë‚˜, íŒŒë€ìƒ‰ ì¹¸ì¸ ê²½ìš°
                if not check((ny, nx)):
                    d ^= 1 # 0ì€ 1ë¡œ, 1ì€ 0ìœ¼ë¡œ, 2ëŠ” 3ìœ¼ë¡œ, 3ì€ 2ë¡œ ë°©í–¥ì„ ë°”ê¾¼ë‹¤
                    ny = y + dy[d]
                    nx = x + dx[d]
                    horses[i][2] = d # ë°”ë€ ë°©í–¥ì„ ì €ì¥
                    if not check((ny, nx)):
                        continue # ë˜ë‹¤ì‹œ ë²—ì–´ë‚˜ë©´ ê·¸ëƒ¥ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤
                idx = maps[y][x].index(i) # í•´ë‹¹ ë§ì´ ìŒ“ì¸ ë§ë“¤ì—ì„œ ëª‡ ë²ˆì§¸ì¸ì§€ 
                # ìƒˆë¡œìš´ ìœ„ì¹˜ë¡œ ê°±ì‹ 
                for j in maps[y][x][idx:]:
                    horses[j][0] = ny
                    horses[j][1] = nx
                # í°ìƒ‰ ì¹¸ì¸ ê²½ìš°
                if matrix[ny][nx] == 0:
                    maps[ny][nx] += maps[y][x][idx:]
                # ë¹¨ê°„ìƒ‰ ì¹¸ì¸ ê²½ìš°
                elif matrix[ny][nx] == 1:
                    maps[ny][nx] += maps[y][x][idx:][::-1]
                # ìì‹  í¬í•¨ ìì‹  ìœ„ì˜ ë§ë“¤ì„ ì‚­ì œ
                del maps[y][x][idx:]
                # ë§ì´ 4ê°œ ì´ìƒì¸ ê²½ìš° ì¢…ë£Œ
                if len(maps[ny][nx]) > 3:
                    return cnt
        return -1

    print(go(matrix, horses, maps))


main()
```

> ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ‘
{: .prompt-info }