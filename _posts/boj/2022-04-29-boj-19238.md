---
title: '[ë°±ì¤€/Gold3] 19238 ìŠ¤íƒ€íŠ¸ íƒì‹œ - íŒŒì´ì¬'
date: 2022-04-29 23:04:00 +0900
categories: [Baekjoon]
tags: [baekjoon, gold3, êµ¬í˜„, ê·¸ë˜í”„ ì´ë¡ , ê·¸ë˜í”„ íƒìƒ‰, ë„ˆë¹„ ìš°ì„  íƒìƒ‰, ì‹œë®¬ë ˆì´ì…˜]
math: true
mermaid: true
---

![](/assets/images/banners/baekjoon_banner.png){: style="max-width: 100%"}

## [ë¬¸ì œ í™•ì¸í•˜ê¸° â”](https://www.acmicpc.net/problem/19238){:target="_blank"}

## â­ï¸ ë‚˜ì˜ í’€ì´

`destinations`ì˜ ì†ë‹˜ë“¤ì˜ ì¶œë°œ ìœ„ì¹˜ì™€ ë„ì°© ìœ„ì¹˜ë¥¼ ì €ì¥í•˜ì˜€ê³ , `matrix`ì—ëŠ” ë²½ê³¼ ì†ë‹˜ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ì˜€ë‹¤. `matrix`ì— ì†ë‹˜ì˜ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” `destinations`ì˜ ì¸ë±ìŠ¤ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ, ë²½ì€ -1ë¡œ ë°”ê¾¸ì—ˆë‹¤. ë˜í•œ, ë¹ˆì¹¸ì´ 0ì´ê¸° ë•Œë¬¸ì— ì¸ë±ìŠ¤ + 1ë¥¼ ê°ê° ì†ë‹˜ì˜ ì¶œë°œ ìœ„ì¹˜ì— ì €ì¥í•˜ì˜€ë‹¤.

`find` í•¨ìˆ˜ë¥¼ í†µí•´ì„œ ì†ë‹˜ì˜ ìœ„ì¹˜ë¥¼ ì°¾ê³ , `go` í•¨ìˆ˜ë¥¼ í†µí•´ì„œ ì°¾ì€ ì†ë‹˜ì˜ ìœ„ì¹˜ë¡œ ì´ë™í•œë‹¤.

ì£¼ì˜í•  ì ì€ `find`ë¡œ ì†ë‹˜ì„ ì°¾ì„ ë•Œ, íƒì‹œì™€ ì†ë‹˜ì´ ê°™ì€ ìœ„ì¹˜ì— ìˆëŠ” ê²½ìš°ì´ë‹¤. ì´ ê²½ìš°ì—ëŠ” `find`ì—ì„œ BFSë¥¼ ì‹œì‘í•˜ê¸° ì „ì— ê²€ì‚¬ë¥¼ í•´ì¤¬ë‹¤. 

ê·¸ë¦¬ê³  `find`ì—ì„œ ìµœë‹¨ ê±°ë¦¬ì¸ ì†ë‹˜ë“¤ì„ ì¼ë‹¨ ë°°ì—´ì— ë„£ê³ , ê·¸ ë‹¤ìŒì— í–‰ ë²ˆí˜¸ì™€ ì—´ ë²ˆí˜¸ì— ëŒ€í•´ì„œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ì„ í•˜ê³  ê°€ì¥ ì²« ë²ˆì§¸ ìš”ì†Œë¥¼ ë°˜í™˜í•˜ì˜€ë‹¤.

`find`ì™€ `go`ì—ì„œ ìƒˆë¡œìš´ ìœ„ì¹˜ê°€ ì†ë‹˜ì˜ ì¶œë°œì§€ë‚˜ ëª©ì ì§€ë„ ì•„ë‹ˆê³ , ì—°ë£Œë„ ëª¨ë‘ ì¨ë²„ë¦° ê²½ìš°ì—ëŠ” `que`ì— ë„£ì§€ ì•ŠëŠ”ë‹¤. (ì—°ë£Œê°€ ë‚¨ì€ ê²½ìš°ì—ë§Œ `que`ì— ë„£ëŠ”ë‹¤.)

BFSë¥¼ ì§„í–‰í•˜ë©´ì„œ ì¤‘ê°„ì— í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì€ ì¶œë°œì§€ë‚˜ ëª©ì ì§€ë¥¼ ì°¾ì§€ ëª»í–ˆë‹¤ê±°ë‚˜, ì—°ë£Œë¥¼ ëª¨ë‘ ì¨ë²„ë¦° ê²ƒì´ë¯€ë¡œ -1ë¥¼ ì¶œë ¥í•˜ê³  í”„ë¡œê·¸ë¨ì„ ëë‚´ë²„ë ¸ë‹¤.

## ì½”ë“œ

```python
import sys
from collections import deque

input = sys.stdin.readline

dx = (1, 0, -1, 0)
dy = (0, 1, 0, -1)


def main():
    n, m, fuel = map(int, input().split())
    matrix = [list(map(int, input().split())) for _ in range(n)]
    start = list(map(lambda x: int(x) - 1, input().split()))
    destinations = [list(map(lambda x: int(x) - 1, input().split())) for _ in range(m)]

    for i in range(n):
        for j in range(n):
            # ë²½ì„ -1ë¡œ í‘œì‹œ
            if matrix[i][j] == 1:
                matrix[i][j] = -1

    for idx, value in enumerate(destinations):
        y, x, _, _ = value
        matrix[y][x] = idx + 1 # ë¹ˆì¹¸ì´ 0ìœ¼ë¡œ í‘œì‹œë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì¸ë±ìŠ¤ + 1ë¡œ ì €ì¥

    def find(start, fuel):
        y, x = start
        visited = [[0] * n for _ in range(n)]
        visited[y][x] = 1
        if matrix[y][x] != 0: # íƒì‹œ ì‹œì‘ ìœ„ì¹˜ì— ì†ë‹˜ì´ ìˆëŠ” ê²½ìš°
            return (matrix[y][x] - 1, fuel) # ì¸ë±ìŠ¤ + 1ë¡œ ì €ì¥ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, -1 ì—°ì‚°ì„ í•´ì„œ ì¸ë±ìŠ¤ë¥¼ ë°˜í™˜
        que = deque()
        que.append((y, x))
        candidates = []
        min_fuel = -1
        while que:
            y, x = que.popleft()
            for i in range(4):
                nx = x + dx[i]
                ny = y + dy[i]
                if (
                    0 <= nx < n
                    and 0 <= ny < n
                    and visited[ny][nx] == 0
                    and matrix[ny][nx] != -1
                ):
                    visited[ny][nx] = visited[y][x] + 1
                    if matrix[ny][nx] != 0: # ì†ë‹˜ì„ ì°¾ìŒ
                        # ì²˜ìŒìœ¼ë¡œ ì†ë‹˜ì„ ì°¾ì•„ ìµœë‹¨ ê±°ë¦¬ê°€ êµ¬í•´ì§€ì§€ ì•Šì•˜ê±°ë‚˜, ì´ ì†ë‹˜ë„ ìµœë‹¨ ê±°ë¦¬ì˜ ì†ë‹˜ì¸ ê²½ìš°
                        if min_fuel == -1 or visited[ny][nx] - 1 == min_fuel: 
                            min_fuel = visited[ny][nx] - 1 # ìµœë‹¨ ê±°ë¦¬ ì´ˆê¸°í™”
                            candidates.append((ny, nx)) # í›„ë³´êµ°ì— ë„£ëŠ”ë‹¤
                    elif fuel != visited[ny][nx] - 1: # ì—°ë£Œê°€ ë‚¨ì€ ê²½ìš°
                        que.append((ny, nx))
        if candidates:
            candidates.sort(key=lambda x: (x[0], x[1])) # í–‰ ë²ˆí˜¸, ì—´ ë²ˆí˜¸ì— ëŒ€í•´ì„œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
            y, x = candidates[0]
            return (matrix[y][x] - 1, fuel - visited[y][x] + 1) # ì—­ì‹œ ì¸ë±ìŠ¤ ê°’ì„ ë°˜í™˜í•˜ê¸° ìœ„í•´ -1 ì—°ì‚°, (ì—°ë£Œ - ì‚¬ìš©í•œ ì—°ë£Œ) ë°˜í™˜
        else:
            print(-1)
            sys.exit(0)

    def go(start_idx, fuel):
        start_y, start_x, dest_y, dest_x = destinations[start_idx]
        visited = [[0] * n for _ in range(n)]
        visited[start_y][start_x] = 1
        que = deque()
        que.append((start_y, start_x))
        while que:
            y, x = que.popleft()
            for i in range(4):
                nx = x + dx[i]
                ny = y + dy[i]
                if (
                    0 <= nx < n
                    and 0 <= ny < n
                    and visited[ny][nx] == 0
                    and matrix[ny][nx] != -1
                ):
                    visited[ny][nx] = visited[y][x] + 1
                    if (ny, nx) == (dest_y, dest_x): # ëª©ì ì§€ì— ë„ë‹¬í•œ ê²½ìš°
                        return (ny, nx, fuel + visited[ny][nx] - 1) # ëª©ì ì§€ ìœ„ì¹˜ì™€ ëŠ˜ì–´ë‚œ ì—°ë£Œ ê³„ì‚°í•˜ì—¬ ë°˜í™˜
                    elif fuel != visited[ny][nx] - 1: # ì—°ë£Œê°€ ë‚¨ì€ ê²½ìš°
                        que.append((ny, nx))
        print(-1)
        sys.exit(0)

    y, x = start # íƒì‹œì˜ ì¶œë°œì§€

    for _ in range(m):
        idx, fuel = find((y, x), fuel) # ì†ë‹˜ì˜ destinationsì—ì„œì˜ ì¸ë±ìŠ¤ ë²ˆí˜¸ì™€ ë‚¨ì€ ì—°ë£Œ ë°˜í™˜
        y, x, _, _ = destinations[idx] # ì¶œë°œì§€
        matrix[y][x] = 0 # íƒì‹œë¥¼ íƒ„ ì†ë‹˜ì€ ì§€ë„ì—ì„œ ì§€ìš´ë‹¤
        y, x, fuel = go(idx, fuel) # ë„ì°©ì§€ì™€ ë‚¨ì€ ì—°ë£Œ ë°˜í™˜ -> ë„ì°©ì§€ê°€ íƒì‹œì˜ ì¶œë°œì§€ê°€ ëœë‹¤

    print(fuel)


main()
```

> ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ‘
{: .prompt-info }